common
{
  // Some common settings
  include("Common.cfg");

  // Default testing parameters
  include("Test_params.cfg", "vanilla_mapxx");
  testshortpaths = true;

  // Default nodebuilder configurations
  defaultsavecompiler = "zennode_normal";
  defaulttestcompiler = "zennode_fast";

  // Texture loading options
  mixtexturesflats = false;
  defaulttexturescale = 1.0f;
  defaultflatscale = 1.0f;
  scaledtextureoffsets = true;

  //mxd. Do vanilla-style thing rotation angle clamping
  doomthingrotationangles = true;
  
  // Texture sources
  textures
  {
    include("Doom_misc.cfg", "textures");
  }

  // Patch sources
  patches
  {
    include("Doom_misc.cfg", "patches");
  }

  // Sprite sources
  sprites
  {
    include("Doom_misc.cfg", "sprites");
  }

  // Flat sources
  flats
  {
    include("Doom_misc.cfg", "flats");
  }
}

mapformat_doom
{
  // The format interface handles the map data format
  formatinterface = "DoomMapSetIO";

  maplumpnames
  {
    include("Doom_misc.cfg", "doommaplumpnames");
  }

  // When this is set to true, sectors with the same tag will light up when a line is highlighted
  linetagindicatesectors = true;

  // Special linedefs
  include("ZDoom_misc.cfg", "speciallinedefs_doomhexen");

  // Default flags for first new thing
  defaultthingflags
  {
    include("Doom_misc.cfg", "defaultthingflags");
  }

  // Door making
  include("ZDoom_misc.cfg", "doormaking_doom");

  // Generalized actions
  generalizedlinedefs = false;
  generalizedsectors = false;

  staticlimits
  {
    visplanes = 128;
  }

  visplaneexplorer
  {
    viewheightdefault = 41;

    viewheights
    {
      1 = "Death";
      24 = "Falling";
      41 = "Eye level";
      96 = "Archvile jump";
    }
  }

  // DEFAULT SECTOR BRIGHTNESS LEVELS
  sectorbrightness
  {
    include("Doom_misc.cfg", "sectorbrightness");
  }

  // SECTOR TYPES
  sectortypes
  {
    include("Doom_sectors.cfg");
  }

  // LINEDEF FLAGS
  linedefflags
	{
		include("Doom_misc.cfg", "linedefflags");
	}

	// LINEDEF ACTIVATIONS
	linedefactivations
	{
	}

	// Linedef flags UDMF translation table
	// This is needed for copy/paste and prefabs to work properly
	// When the UDMF field name is prefixed with ! it is inverted
	linedefflagstranslation
	{
		include("Doom_misc.cfg", "linedefflagstranslation");
	}

	// LINEDEF TYPES
	linedeftypes
	{
		include("Doom_linedefs.cfg");
	}

	// THING FLAGS
	thingflags
	{
		include("Doom_misc.cfg", "thingflags");
	}

	// Thing flags UDMF translation table
	// This is needed for copy/paste and prefabs to work properly
	// When the UDMF field name is prefixed with ! it is inverted
	thingflagstranslation
	{
		include("Doom_misc.cfg", "thingflagstranslation");
	}
	
		// How to compare thing flags (for the stuck things error checker)
	thingflagscompare
	{
		include("Doom_misc.cfg", "thingflagscompare");
	}

	// Things flags masks
	include("Doom_misc.cfg", "thingflagsmasks");
}

// ***********************************************************
// *                                                         *
// *                       Text map format                   *
// *                                                         *
// ***********************************************************

mapformat_udmf
{
	// The format interface handles the map data format
	formatinterface = "UniversalMapSetIO";

	maplumpnames
	{
		include("UDMF_misc.cfg", "udmfmaplumpnames_begin");
		include("UDMF_misc.cfg", "udmfmaplumpnames_end");
	}

	linedefflags
	{
		blocking = "Impassable";
		blockmonsters = "Block monster";
		twosided = "Doublesided";
		dontpegtop = "Upper unpegged";
		dontpegbottom = "Lower unpegged";
		secret = "Secret";
		blocksound = "Block sound";
		dontdraw = "Hidden";
		mapped = "Shown";
	}

	linedefflagtooltips
	{
		blocking = "If set on a 2-sided linedef, the linedef blocks players and monsters from being able to move through it. \nThis is typically used for mid-textured cage bars.\nBy convention, most doom-related software sets it for 1-sided lines by default because the\nid Software maps did, but it doesn't actually do anything.";
		blockmonsters = "If set, blocks only monster movement.\n(in addition to whatever existing blocking properties it would have).";
		twosided = "If set, then it has 2 sidedefs and acts as a connection between two sectors.";
		dontpegtop = "If set:\nIf the linedef is 2-sided, the upper texture starts at the height of the higher ceiling.\nIf not set: and the linedef is 2-sided, the upper texture starts at the lower ceiling instead.\nIf the linedef is 1-sided, this does nothing.";
		dontpegbottom = "If set: If the linedef is 2-sided, the lower texture starts at the height of the higher ceiling.\nIf not set: and the linedef is 2-sided, the upper texture starts at the higher floor instead.\nIf the linedef is 1-sided, this makes the mid texture start at floor instead of the ceiling.\nYou probably want to use this for door tracks if you don't want them to move with the door.";
		secret = "If set, this flag prevents it from being marked as a switch or a door on the automap.";
		blocksound = "If set, this linedef will partially block monster-waking sound from passing into the sector on the other side of it.\nNote that a sound must try to pass through two of these lines before being blocked.\nThis does not block the actual audio that the player hears at all, it is only for the monster AI.\nThis does nothing for 1-sided linedefs.";
		dontdraw = "If set, this line is not shown on the automap even if you are looking directly at it";
		mapped = "If set, this line is always revealed on the automap even if you haven't actually visited the area.";
	}

	thingflags
	{
		skill1 = "Skill 1";
		skill2 = "Skill 2";
		skill3 = "Skill 3";
		skill4 = "Skill 4";
		skill5 = "Skill 5";
		ambush = "Ambush";
		single = "Singleplayer";
		dm = "Deathmatch";
		coop = "Cooperative";
	}

	thingflagtooltips
	{
		skill1 = "If set, this actor appears on 'I'm Too Young To Die' difficulty.";
		skill2 = "If set, this actor appears on 'Hey, Not Too Rough' difficulty.";
		skill3 = "If set, this actor appears on 'Hurt Me Plenty' difficulty.";
		skill4 = "If set, this actor appears on 'Ultraviolence' difficulty.";
		skill5 = "If set, this actor appears on 'Nightmare' difficulty.";
		ambush = "If set, this actor does not wake up if it hears the player until the player comes within field of view\n(even if the actor is facing the away from the player).";
		single = "If not set, the actor does not appear in singleplayer modes.";
		dm = "If not set, the actor does not appear in deathmatch modes.";
		coop = "If not set, the actor does not appear in co-op modes.";
	}

	// Default flags for first new thing
	defaultthingflags
	{
		skill1;
		skill2;
		skill3;
		skill4;
		skill5;
		single;
		coop;
		dm;
	}

	// Default thing filters
	// (these are not required, just useful for new users)
	thingsfilters
	{

		filter0
		{
			name = "Keys only";
			category = "keys";
			type = -1;
		}

		filter1
		{
			name = "Deathmatch";
			category = "";
			type = -1;

			fields
			{
				dm = true;
			}
		}

		filter2
		{
			name = "Cooperative";
			category = "";
			type = -1;

			fields
			{
				coop = true;
			}
		}

		filter3
		{
			name = "Skill 1";
			category = "";
			type = -1;

			fields
			{
				skill1 = true;
			}
		}

		filter4
		{
			name = "Skill 2";
			category = "";
			type = -1;

			fields
			{
				skill2 = true;
			}
		}

		filter5
		{
			name = "Skill 3";
			category = "";
			type = -1;

			fields
			{
				skill3 = true;
			}
		}

		filter6
		{
			name = "Skill 4";
			category = "";
			type = -1;

			fields
			{
				skill4 = true;
			}
		}

		filter7
		{
			name = "Skill 5";
			category = "";
			type = -1;

			fields
			{
				skill5 = true;
			}
		}
	}


	// How to compare thing flags (for the stuck things error checker)
	thingflagscompare
	{
		skills
		{
			skill1;
			skill2;
			skill3;
			skill4;
			skill5;
		}

		gamemodes
		{
			single { requiredgroups = "skills"; }
			coop   { requiredgroups = "skills"; }
			dm      { ignoredgroups = "skills"; }
		}
	}

	// Thing flags UDMF translation table
	// This is needed for copy/paste and prefabs to work properly
	// When the UDMF field name is prefixed with ! it is inverted
	thingflagstranslation
	{
		include("Doom_misc.cfg", "thingflagstranslation");
	}

	// Linedef flags UDMF translation table
	// This is needed for copy/paste and prefabs to work properly
	// When the UDMF field name is prefixed with ! it is inverted
	linedefflagstranslation
	{
		include("Doom_misc.cfg", "linedefflagstranslation");
	}

	universalfields
	{
		linedef
		{
  			comment
			{
				type = 2;
				default = "";
			}	
		}

		sidedef
		{
			comment
			{
				type = 2;
				default = "";
			}
		}

		thing
		{
			comment
			{
				type = 2;
				default = "";
			}
		}

		sector
		{
			comment
			{
				type = 2;
				default = "";
			}
		}
	}
}
